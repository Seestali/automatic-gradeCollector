
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>database &#8212; automatic-gradeCollectorServer 29.12.2021 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for database</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">import</span> <span class="nn">hashlib</span>


<div class="viewcode-block" id="Database"><a class="viewcode-back" href="../database.html#database.Database">[docs]</a><span class="k">class</span> <span class="nc">Database</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This Class creates a connection to the database and provides methods to add, edit and remove modules, students and grades.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method initializes the database connection.</span>
<span class="sd">        :param file: the location of the database file</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

    <span class="c1"># add student to student table and check if email already exists</span>
<div class="viewcode-block" id="Database.addStudent"><a class="viewcode-back" href="../database.html#database.Database.addStudent">[docs]</a>    <span class="k">def</span> <span class="nf">addStudent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studiengang</span><span class="p">,</span> <span class="n">vorname</span><span class="p">,</span> <span class="n">nachname</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method adds a student to the database.</span>
<span class="sd">        :param studiengang: the student&#39;s study program</span>
<span class="sd">        :param vorname: the student&#39;s first name</span>
<span class="sd">        :param nachname: the student&#39;s last name</span>
<span class="sd">        :param email: the student&#39;s email</span>
<span class="sd">        :param password: the student&#39;s password</span>
<span class="sd">        :return: True if the student was added, False if the student already exists</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students WHERE Email = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">email</span><span class="p">,))</span>
        <span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">student</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;INSERT INTO students (Studiengang, Vorname, Nachname, Email, Passwort) VALUES (?, ?, ?, ?, ?)&quot;</span><span class="p">,</span>
                <span class="p">(</span><span class="n">studiengang</span><span class="p">,</span> <span class="n">vorname</span><span class="p">,</span> <span class="n">nachname</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span>
                 <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span>
                     <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Database.validateStudent"><a class="viewcode-back" href="../database.html#database.Database.validateStudent">[docs]</a>    <span class="k">def</span> <span class="nf">validateStudent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method validates a student.</span>
<span class="sd">        :param email: the student&#39;s email</span>
<span class="sd">        :param password: the student&#39;s password</span>
<span class="sd">        :return: True if the student exists and the password is correct, False if the student does not exist or the password is wrong</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students WHERE Email = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">email</span><span class="p">,))</span>
        <span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">student</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span> <span class="o">==</span> <span class="n">student</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># get student id from email</span>
<div class="viewcode-block" id="Database.getStudentId"><a class="viewcode-back" href="../database.html#database.Database.getStudentId">[docs]</a>    <span class="k">def</span> <span class="nf">getStudentId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method gets the student id from the email.</span>
<span class="sd">        :param email: the student&#39;s email</span>
<span class="sd">        :return: the student id or False if the student does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students WHERE Email = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">email</span><span class="p">,))</span>
        <span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">student</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">student</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

    <span class="c1"># get student email from id</span>
<div class="viewcode-block" id="Database.getStudentMail"><a class="viewcode-back" href="../database.html#database.Database.getStudentMail">[docs]</a>    <span class="k">def</span> <span class="nf">getStudentMail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method gets the student email from the id.</span>
<span class="sd">        :param id: the student&#39;s id</span>
<span class="sd">        :return: the student email or False if the student does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students WHERE ID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
        <span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">student</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span></div>

    <span class="c1"># get student data from email</span>
<div class="viewcode-block" id="Database.getStudentData"><a class="viewcode-back" href="../database.html#database.Database.getStudentData">[docs]</a>    <span class="k">def</span> <span class="nf">getStudentData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method gets the student data from the email.</span>
<span class="sd">        :param email: the student&#39;s email</span>
<span class="sd">        :return: the student data or False if the student does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students WHERE Email = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">email</span><span class="p">,))</span>
        <span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">student</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">student</span></div>

    <span class="c1"># edit student and check if he exists</span>
<div class="viewcode-block" id="Database.editStudent"><a class="viewcode-back" href="../database.html#database.Database.editStudent">[docs]</a>    <span class="k">def</span> <span class="nf">editStudent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studiengang</span><span class="p">,</span> <span class="n">vorname</span><span class="p">,</span> <span class="n">nachname</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method edits a student.</span>
<span class="sd">        :param studiengang: the new student&#39;s study program</span>
<span class="sd">        :param vorname: the new student&#39;s first name</span>
<span class="sd">        :param nachname: the new student&#39;s last name</span>
<span class="sd">        :param password: the new student&#39;s password</span>
<span class="sd">        :param email: the new student&#39;s email</span>
<span class="sd">        :return: True if the student was edited, False if the student does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students WHERE Email = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">email</span><span class="p">,))</span>
        <span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">student</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;UPDATE students SET Studiengang = ?, Vorname = ?, Nachname = ?, Passwort = ? WHERE Email = ?&quot;</span><span class="p">,</span>
                <span class="p">(</span><span class="n">studiengang</span><span class="p">,</span> <span class="n">vorname</span><span class="p">,</span> <span class="n">nachname</span><span class="p">,</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(),</span> <span class="n">email</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span></div>

    <span class="c1"># remove student by id and all entries in student module combination but check if student exists</span>
<div class="viewcode-block" id="Database.removeStudent"><a class="viewcode-back" href="../database.html#database.Database.removeStudent">[docs]</a>    <span class="k">def</span> <span class="nf">removeStudent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method removes a student.</span>
<span class="sd">        :param id: the student&#39;s id</span>
<span class="sd">        :return: True if the student was removed, False if the student does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students WHERE ID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
        <span class="n">student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">student</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM students WHERE ID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;DELETE FROM studentModul WHERE studentID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span></div>

    <span class="c1"># show table students</span>
<div class="viewcode-block" id="Database.getTableStudents"><a class="viewcode-back" href="../database.html#database.Database.getTableStudents">[docs]</a>    <span class="k">def</span> <span class="nf">getTableStudents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method shows the students table.</span>
<span class="sd">        :return: the students table</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM [students]&quot;</span><span class="p">)</span>
        <span class="n">tableStudents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">tableStudents</span></div>

    <span class="c1"># get module id from module name</span>
<div class="viewcode-block" id="Database.getModuleId"><a class="viewcode-back" href="../database.html#database.Database.getModuleId">[docs]</a>    <span class="k">def</span> <span class="nf">getModuleId</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method gets the module id from the module name.</span>
<span class="sd">        :param name: the module&#39;s name</span>
<span class="sd">        :return: the module id or False if the module does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM modules WHERE Name = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
        <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">module</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

    <span class="c1"># get module by id</span>
<div class="viewcode-block" id="Database.getModule"><a class="viewcode-back" href="../database.html#database.Database.getModule">[docs]</a>    <span class="k">def</span> <span class="nf">getModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method gets the module by the id.</span>
<span class="sd">        :param id: the module&#39;s id</span>
<span class="sd">        :return: the module or False if the module does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM modules WHERE ID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
        <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">module</span></div>

    <span class="c1"># get modules of student by student id and semester</span>
<div class="viewcode-block" id="Database.getModules"><a class="viewcode-back" href="../database.html#database.Database.getModules">[docs]</a>    <span class="k">def</span> <span class="nf">getModules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studentID</span><span class="p">,</span> <span class="n">semester</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method gets all modules of the student by the student id and semester.</span>
<span class="sd">        :param studentID: the student&#39;s id</span>
<span class="sd">        :param semester: the semester</span>
<span class="sd">        :return: the modules of the student</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT * FROM studentModul WHERE studentID = ? AND Semester = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">studentID</span><span class="p">,</span> <span class="n">semester</span><span class="p">))</span>
        <span class="n">modules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">modules</span></div>

    <span class="c1"># get modules of student by student id</span>
<div class="viewcode-block" id="Database.getModulesByStudentID"><a class="viewcode-back" href="../database.html#database.Database.getModulesByStudentID">[docs]</a>    <span class="k">def</span> <span class="nf">getModulesByStudentID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studentID</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method gets all modules of the student by the student id.  The semester is not needed.</span>
<span class="sd">        :param studentID: the student&#39;s id</span>
<span class="sd">        :return: all modules of the student</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT * FROM studentModul WHERE studentID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">studentID</span><span class="p">,))</span>
        <span class="n">modules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">modules</span></div>

    <span class="c1"># add module to modules table and check if module already exists</span>
<div class="viewcode-block" id="Database.addModule"><a class="viewcode-back" href="../database.html#database.Database.addModule">[docs]</a>    <span class="k">def</span> <span class="nf">addModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">beschreibung</span><span class="p">,</span> <span class="n">leistung</span><span class="p">,</span> <span class="n">ects</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method adds a module.</span>
<span class="sd">        :param name: the module&#39;s name</span>
<span class="sd">        :param beschreibung: the module&#39;s description</span>
<span class="sd">        :param leistung: the type of exam for the module</span>
<span class="sd">        :param ects: the module&#39;s ects</span>
<span class="sd">        :return: True if the module was added, False if the module already exists</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM modules WHERE Name = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
        <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO modules (Name, Beschreibung, Prüfungsleistung, ECTS) VALUES (?, ?, ?, ?)&quot;</span><span class="p">,</span>
                                <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">beschreibung</span><span class="p">,</span> <span class="n">leistung</span><span class="p">,</span> <span class="n">ects</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># remove module from modules table amd delete all entries in studentModul table but check if module exists</span>
<div class="viewcode-block" id="Database.removeModule"><a class="viewcode-back" href="../database.html#database.Database.removeModule">[docs]</a>    <span class="k">def</span> <span class="nf">removeModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;&#39;</span>
<span class="sd">        This method removes a module.</span>
<span class="sd">        :param id: the module&#39;s id</span>
<span class="sd">        :return: True if the module was removed, False if the module does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM modules WHERE ID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
        <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM modules WHERE ID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;DELETE FROM studentModul WHERE moduleID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span></div>

    <span class="c1"># edit module and check if module exists</span>
<div class="viewcode-block" id="Database.editModule"><a class="viewcode-back" href="../database.html#database.Database.editModule">[docs]</a>    <span class="k">def</span> <span class="nf">editModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">beschreibung</span><span class="p">,</span> <span class="n">leistung</span><span class="p">,</span> <span class="n">ects</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method edits a module.</span>
<span class="sd">        :param name: the new module&#39;s name</span>
<span class="sd">        :param beschreibung: the new module&#39;s description</span>
<span class="sd">        :param leistung: the new module&#39;s type of exam</span>
<span class="sd">        :param ects: the new module&#39;s ects</span>
<span class="sd">        :param id: the module&#39;s id</span>
<span class="sd">        :return: True if the module was edited, False if the module does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM modules WHERE ID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
        <span class="n">module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">module</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;UPDATE modules SET Name = ?, Beschreibung = ?, Prüfungsleistung = ?, ECTS = ? WHERE ID = ?&quot;</span><span class="p">,</span>
                <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">beschreibung</span><span class="p">,</span> <span class="n">leistung</span><span class="p">,</span> <span class="n">ects</span><span class="p">,</span> <span class="nb">id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span></div>

    <span class="c1"># show table modules</span>
<div class="viewcode-block" id="Database.getTableModules"><a class="viewcode-back" href="../database.html#database.Database.getTableModules">[docs]</a>    <span class="k">def</span> <span class="nf">getTableModules</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;&#39;</span>
<span class="sd">        This method shows the modules table.</span>
<span class="sd">        :return: the modules table</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM [modules]&quot;</span><span class="p">)</span>
        <span class="n">tableModules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">tableModules</span></div>

    <span class="c1"># add student to module and check if it already exists</span>
<div class="viewcode-block" id="Database.addStudentModule"><a class="viewcode-back" href="../database.html#database.Database.addStudentModule">[docs]</a>    <span class="k">def</span> <span class="nf">addStudentModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">,</span> <span class="n">semester</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method adds a student to a module.</span>
<span class="sd">        :param studentID: the student&#39;s id</span>
<span class="sd">        :param moduleID: the module&#39;s id</span>
<span class="sd">        :param semester: the semester</span>
<span class="sd">        :return: True if the student was added, False if the student was already in the module in the same semester</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM studentModul WHERE studentID = ? AND moduleID = ? AND Semester = ?&quot;</span><span class="p">,</span>
                            <span class="p">(</span><span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">,</span> <span class="n">semester</span><span class="p">))</span>
        <span class="n">studentModule</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">studentModule</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO studentModul (studentID, moduleID, Semester) VALUES (?, ?, ?)&quot;</span><span class="p">,</span>
                                <span class="p">(</span><span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">,</span> <span class="n">semester</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># edit student module combination and check if it already exists</span>
<div class="viewcode-block" id="Database.editStudentModule"><a class="viewcode-back" href="../database.html#database.Database.editStudentModule">[docs]</a>    <span class="k">def</span> <span class="nf">editStudentModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">,</span> <span class="n">note</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method edits a student module combination.</span>
<span class="sd">        :param studentID: the student&#39;s id</span>
<span class="sd">        :param moduleID: the module&#39;s id</span>
<span class="sd">        :param note: the student&#39;s grade</span>
<span class="sd">        :return: True if the student module combination was edited, False if the student module combination does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT * FROM studentModul WHERE studentID = ? AND moduleID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">))</span>
        <span class="n">studentModule</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">studentModule</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE studentModul SET Note = ? WHERE studentID = ? AND moduleID = ?&quot;</span><span class="p">,</span>
                                <span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span></div>

    <span class="c1"># remove student from module and check if it already exists</span>
<div class="viewcode-block" id="Database.removeStudentModule"><a class="viewcode-back" href="../database.html#database.Database.removeStudentModule">[docs]</a>    <span class="k">def</span> <span class="nf">removeStudentModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method removes a student from a module.</span>
<span class="sd">        :param studentID: the student&#39;s id</span>
<span class="sd">        :param moduleID: the module&#39;s id</span>
<span class="sd">        :return: True if the student was removed, False if the student module combination does not exist</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT * FROM studentModul WHERE studentID = ? AND moduleID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">))</span>
        <span class="n">studentModule</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">studentModule</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s2">&quot;DELETE FROM studentModul WHERE studentID = ? AND moduleID = ?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">studentID</span><span class="p">,</span> <span class="n">moduleID</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">automatic-gradeCollectorServer</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">server</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Michael Oder & Ben Leitzbach.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>